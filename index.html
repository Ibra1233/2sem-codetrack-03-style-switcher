<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.png" type="image/png">
    <title>Style Switcher Demo</title>

    <!-- CSS files -->
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/theme-switcher.css">
    <link rel="stylesheet" href="css/product-card.css">
</head>
<body>
<!-- Top bar for the style switcher -->
<div class="top-bar">
    <div class="top-bar-content">
        <div class="site-title">
            <h1>Style Switcher Demo</h1>
        </div>
        <nav class="example-links">
            <a href="index.html">Full example</a>
            <a href="minimal.html">Minimal example</a>
        </nav>
        <div class="theme-switcher-wrapper">
            <div class="theme-switcher">
                <select id="theme-select" class="theme-select" aria-label="Select theme"></select>
            </div>
        </div>
    </div>
</div>

<!-- Confirmation alert -->
<div id="theme-alert" class="theme-alert hidden">
    <p>Er du sikker på, du vil skifte tema?</p>
    <button id="confirm-theme">Ja</button>
    <button id="cancel-theme">Nej</button>
</div>

<main class="content-area">
    <section class="demo-section">
        <div id="demo">
            <div class="product-card">
                <img src="assets/products/product-image-headset.png" alt="Premium Headphones" class="product-image">
                <div class="product-content">
                    <div class="component-group">
                        <span class="tag">Elektronik</span>
                        <span class="tag">Lyd</span>
                        <span class="badge">Bestseller</span>
                    </div>
                    <h3 class="product-title">Premium Trådløse Hovedtelefoner</h3>

                    <div class="rating">
                        <div class="stars">
                            <svg class="star" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                            <svg class="star" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                            <svg class="star" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                            <svg class="star" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                            <svg class="star" viewBox="0 0 24 24" fill="currentColor" opacity="0.5"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                        </div>
                        <span class="reviews-count">42 anmeldelser</span>
                    </div>

                    <p class="product-description">
                        Oplev krystalklar lyd med disse premium trådløse hovedtelefoner.
                        Aktiv støjreduktion, lang batteritid, og komfortabel pasform til langvarig brug.
                    </p>

                    <div class="price">
                        1.299 kr <span class="original">1.699 kr</span> <span class="discount">-23%</span>
                    </div>

                    <div class="variant-selectors">
                        <span class="variant-label">Farve:</span>
                        <div class="color-selector active" style="background-color: #111827;"></div>
                        <div class="color-selector" style="background-color: #ffffff; border-color: #e5e7eb;"></div>
                        <div class="color-selector" style="background-color: #7c3aed;"></div>
                    </div>

                    <div class="variant-selectors">
                        <span class="variant-label">Størrelse:</span>
                        <div class="size-selector">S</div>
                        <div class="size-selector active">M</div>
                        <div class="size-selector">L</div>
                    </div>

                    <div class="component-group">
                        <button>Læg i kurv</button>
                        <a href="#" class="button">Køb nu</a>
                    </div>

                    <div class="product-meta">
                        <div class="left">Levering: 1-3 hverdage</div>
                        <div class="right">
                            <span class="stock in-stock">På lager</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

<!-- JS files -->
<script src="js/style-switcher.js"></script>
<script src="js/product-demo.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Initialize the style switcher
        StyleSwitcher.initStyleSwitcher({
            target: document.documentElement,
            key: 'site-theme',
            defaultTheme: 'light',
            themes: ['light', 'dark', 'retro', 'golden'],
        });

        const alertBox = document.getElementById('theme-alert');
        const confirmBtn = document.getElementById('confirm-theme');
        const cancelBtn = document.getElementById('cancel-theme');
        const themeSelect = document.getElementById('theme-select');
        let pendingTheme = null;

        // Remove automatic binding from style-switcher
        themeSelect.onchange = null;

        // When user selects a theme, show confirmation
        themeSelect.addEventListener('change', (e) => {
            pendingTheme = e.target.value;
            alertBox.classList.remove('hidden'); // show alert
            themeSelect.value = StyleSwitcher.getTheme(); // keep old theme until confirmed
        });

        confirmBtn.addEventListener('click', () => {
            StyleSwitcher.setTheme(pendingTheme);
            alertBox.classList.add('hidden');
            pendingTheme = null;
        });

        cancelBtn.addEventListener('click', () => {
            alertBox.classList.add('hidden');
            pendingTheme = null; // keep old theme
        });
    });
</script>
</body>
</html>
